<!-- Powered by BMADâ„¢ Core -->

# Smart Shard Reassembly Task

## Purpose

- Intelligently reassemble sharded content for final review and submission
- Maintain formatting consistency and document structure during reassembly
- Resolve cross-references and dependencies across reassembled shards
- Validate content integrity to ensure no information is lost during reassembly
- Create flexible output options based on submission requirements

## Usage Scenarios

### Scenario 1: Technical Volume Reassembly

1. **Shard Collection**: Gather all finalized technical approach shards
2. **Sequence Determination**: Establish correct reassembly order
3. **Content Integration**: Combine shards with proper transitions and formatting
4. **Cross-Reference Resolution**: Update all internal references
5. **Output Generation**: Create final document with appropriate formatting

### Scenario 2: Multi-Volume Proposal Reassembly

1. **Component Inventory**: Organize all proposal component shards
2. **Structural Mapping**: Define volume organization and hierarchy
3. **Content Consolidation**: Reassemble each volume from component shards
4. **Validation**: Verify completeness and consistency across volumes
5. **Format Application**: Apply final formatting for each submission requirement

## Task Instructions

### 1. Reassembly Preparation and Planning

**Preparation Process**:

1. **Shard Inventory Assessment**:
   - Create comprehensive inventory of all content shards
   - Verify completion status of each shard
   - Validate version currency to ensure latest content
   - Check shard metadata for reassembly instructions

2. **Reassembly Sequence Planning**:
   - Analyze shard manifest to understand relationships
   - Determine logical reassembly order
   - Map dependencies between shards
   - Create directed graph of shard relationships
   - Develop critical path for assembly operations

3. **Structural Template Selection**:
   - Identify appropriate document structure templates
   - Review RFQ formatting requirements
   - Select master templates for each volume
   - Configure template settings for submission requirements
   - Prepare style guides for consistent formatting

4. **Resource Allocation Planning**:
   - Estimate processing requirements for reassembly
   - Schedule reassembly operations for optimal throughput
   - Allocate processing resources based on complexity
   - Plan for iterative verification steps

### 2. Smart Content Integration Process

**Integration Approach**:

1. **Contextual Boundary Processing**:
   - Analyze boundary content between adjacent shards
   - Detect redundancies and overlaps at shard edges
   - Identify content gaps between shards
   - Create optimal transition content where needed
   - Smooth linguistic transitions between shards

2. **Formatting Normalization**:
   - Standardize formatting across all shards
   - Harmonize heading levels and numbering
   - Normalize text styling and paragraph formats
   - Standardize list formatting and indentation
   - Create consistent spacing and layout

3. **Content Flow Enhancement**:
   - Evaluate narrative flow across shard boundaries
   - Enhance transitions between conceptual sections
   - Adjust content sequencing for logical progression
   - Apply consistent tone and voice throughout
   - Balance section lengths and emphasis

4. **Document Structure Maintenance**:
   - Preserve hierarchical document structure
   - Rebuild section and subsection relationships
   - Apply consistent numbering schemas
   - Maintain parallelism in headings and structure
   - Ensure proper nesting of content elements

### 3. Cross-Reference Resolution

**Resolution Process**:

1. **Reference Identification**:
   - Scan for internal references across all shards
   - Detect figure, table, and section references
   - Identify footnotes and endnotes
   - Locate citations and bibliographic references
   - Flag glossary terms and acronym definitions

2. **Reference Mapping**:
   - Create resolution table for all cross-references
   - Map references to their targets across shards
   - Verify reference validity and accuracy
   - Detect dangling or broken references
   - Create placeholder strategy for unresolved references

3. **Reference Updating**:
   - Update all section numbering references
   - Recalculate figure and table numbers
   - Rebuild table of contents and indexes
   - Update page number references
   - Regenerate footnote and endnote numbering

4. **Reference Validation**:
   - Verify all references point to correct targets
   - Check reference formatting consistency
   - Test hyperlink functionality in digital formats
   - Validate cross-volume references
   - Confirm citation accuracy against source list

### 4. Content Integrity Validation

**Validation Process**:

1. **Completeness Verification**:
   - Compare reassembled content against shard inventory
   - Verify all required content is included
   - Check for accidental content duplication
   - Detect missing sections or subsections
   - Validate inclusion of all referenced elements

2. **Requirement Coverage Validation**:
   - Trace requirements from compliance matrix to reassembled content
   - Verify all requirements are addressed
   - Check for requirement implementation consistency
   - Validate cross-requirement dependencies
   - Create coverage report showing requirement satisfaction

3. **Semantic Integrity Check**:
   - Analyze content for logical consistency
   - Check for contradictions across formerly separate shards
   - Verify terminology consistency
   - Validate concept and definition consistency
   - Check messaging alignment with win themes

4. **Quality Assurance**:
   - Perform automated grammar and style checks
   - Verify formatting consistency
   - Validate adherence to style guide
   - Check glossary and acronym usage
   - Verify graphics and table integrity

### 5. Output Format Generation

**Output Process**:

1. **Format-Specific Processing**:
   - Configure output for required submission formats
   - Apply format-specific optimization
   - Generate multiple formats as needed:
     - PDF with appropriate PDF/A compliance
     - Word documents with revision tracking
     - Plain text for specific submission systems
     - HTML for web-based submissions
     - Custom XML formats for specialized systems

2. **Layout Optimization**:
   - Apply professional page layout
   - Optimize page and section breaks
   - Position figures and tables appropriately
   - Balance text flow and white space
   - Create consistent headers and footers
   - Generate appropriate front matter

3. **Media Integration**:
   - Embed graphics at appropriate resolution
   - Set up proper figure and table positioning
   - Integrate charts and diagrams
   - Optimize media for file size constraints
   - Ensure accessibility features for all media

4. **Output Validation**:
   - Test document rendering across target platforms
   - Verify output meets submission requirements
   - Check file size constraints
   - Validate digital signatures if required
   - Test document security settings

### 6. Version Control and Iteration Support

**Version Management**:

1. **Snapshot Creation**:
   - Generate versioned snapshots during reassembly
   - Maintain reassembly history for audit purposes
   - Create rollback points at key assembly milestones
   - Document assembly process and decisions

2. **Change Integration**:
   - Handle late-breaking changes to component shards
   - Implement selective updates to reassembled documents
   - Track change impact across reassembled content
   - Provide change impact analysis and reporting

3. **Review Support**:
   - Enable review comments and annotations
   - Generate review packages for specific audiences
   - Track review status across document components
   - Facilitate parallel review workflows

4. **Final Package Preparation**:
   - Create submission-ready document package
   - Generate appropriate metadata and tracking information
   - Create distribution packages based on audience needs
   - Prepare final delivery formats

## Best Practices

- **Hierarchical Assembly**: Reassemble content in a bottom-up manner, combining subsections before sections
- **Context Preservation**: Pay special attention to content at shard boundaries to maintain narrative flow
- **Reference Resolution**: Resolve all cross-references early in the reassembly process
- **Multiple Validations**: Conduct progressive validations throughout reassembly rather than only at the end
- **Format Independence**: Maintain content in format-neutral representation until final output generation
- **Metadata Retention**: Preserve metadata from original shards for traceability and future revisions
- **Template Consistency**: Use consistent document templates that match submission requirements
- **Automated Testing**: Implement automated checks for completeness and formatting consistency
- **Version Control**: Maintain clear version tracking throughout the reassembly process
- **Performance Optimization**: Use incremental processing for large documents to reduce memory requirements

## Integration Points

- **RFQ Document Sharding**: Understands the original sharded structure for contextual reassembly
- **Compliance Requirement Sharding**: Uses requirement relationships for validation during reassembly
- **Proposal Content Sharding**: Reassembles content shards with appropriate context and formatting
- **Shard-Aware Evaluation**: Utilizes evaluation findings for content enhancement during reassembly
- **Shard-Aware Visualization**: Uses relationship visualizations to guide reassembly process

## Related Agents

- **Technical Narrative Drafter**: Provider of content shards for reassembly
- **Evaluator Simulator**: Validator of reassembled content quality
- **Compliance Matrix Builder**: Provider of requirement coverage data
- **RFQ Opportunity Summarizer**: Guide for final submission requirements

## Technical Implementation Notes

- Builds on existing document processing capabilities
- Implements smart boundary detection algorithms
- Uses natural language processing for content flow optimization
- Provides flexible output formatting for multiple submission requirements
- Compatible with standard document formats and templates
